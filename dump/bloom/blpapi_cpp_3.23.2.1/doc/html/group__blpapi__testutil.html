<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BLPAPI C++: Component blpapi_testutil</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BLPAPI C++
   &#160;<span id="projectnumber">3.23.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__blpapi__testutil.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a> &#124;
<a href="#nested-classes">Classes</a> &#124;
<a href="#typedef-members">Typedefs</a>  </div>
  <div class="headertitle">
<div class="title">Component blpapi_testutil<div class="ingroups"><a class="el" href="group__blpapi.html">Blpapi</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Provides static utility for unit testing BLPAPI applications.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespaceBloombergLP"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceBloombergLP.html">BloombergLP</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:namespaceBloombergLP_1_1blpapi"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceBloombergLP_1_1blpapi.html">BloombergLP::blpapi</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:namespaceBloombergLP_1_1blpapi_1_1test"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceBloombergLP_1_1blpapi_1_1test.html">BloombergLP::blpapi::test</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBloombergLP_1_1blpapi_1_1test_1_1MessageProperties.html">MessageProperties</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBloombergLP_1_1blpapi_1_1test_1_1TestUtil.html">TestUtil</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga85372be562fde52ca2d1da14b2b5b31c"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="classBloombergLP_1_1blpapi_1_1test_1_1TestUtil.html">test::TestUtil</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__blpapi__testutil.html#ga85372be562fde52ca2d1da14b2b5b31c">TestUtil</a></td></tr>
<tr class="separator:ga85372be562fde52ca2d1da14b2b5b31c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Provides static utility for unit testing BLPAPI applications. </p>
<p><a class="anchor" id="purpose"></a> <a class="anchor" id="1"></a> </p><dl class="section user"><dt>Purpose: </dt><dd>Provides static utility for unit testing BLPAPI applications. </dd></dl>
<dl class="section user"><dt></dt><dd><a class="anchor" id="classes"></a> <a class="anchor" id="2"></a> </dd></dl>
<dl class="section user"><dt>Classes: </dt><dd><table class="doxtable">
<tr>
<td>blpapi::test::TestUtil </td><td>Static utility class for unit testing  </td></tr>
</table>
</dd></dl>
<dl class="section user"><dt></dt><dd></dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__blpapi__messageformatter.html" title="Format messages for publishing.">Component blpapi_messageformatter</a> </dd></dl>
<dl class="section user"><dt></dt><dd></dd></dl>
<dl class="section user"><dt></dt><dd><a class="anchor" id="description"></a> <a class="anchor" id="3"></a> </dd></dl>
<dl class="section user"><dt>Description: </dt><dd>This component defines a class, TestUtil, that provides helpers for unit-testing BLPAPI. This includes serializing / deserializing services, creating test events, and appending / formatting messages in these events. </dd></dl>
<dl class="section user"><dt></dt><dd></dd></dl>
<dl class="section user"><dt></dt><dd><a class="anchor" id="usage"></a> <a class="anchor" id="description.usage"></a> <a class="anchor" id="3.1"></a> </dd></dl>
<dl class="section user"><dt>Usage: </dt><dd></dd></dl>
<dl class="section user"><dt></dt><dd></dd></dl>
<dl class="section user"><dt></dt><dd><a class="anchor" id="example~3A_create_subscription_data_with_correlation_id"></a> <a class="anchor" id="usage.example~3A_create_subscription_data_with_correlation_id"></a> <a class="anchor" id="description.usage.example~3A_create_subscription_data_with_correlation_id"></a> <a class="anchor" id="example"></a> <a class="anchor" id="usage.example"></a> <a class="anchor" id="description.usage.example"></a> <a class="anchor" id="3.1.1"></a> </dd></dl>
<dl class="section user"><dt>Example: Create subscription data with correlation id:</dt><dd>For the purpose of unit testing the behavior of our tick processing, we want to create a subscription data event containing a single tick for a given subscription, identified with a correlation id <code>correlationId</code> that is available in the test. </dd></dl>
<dl class="section user"><dt></dt><dd>We first create the service from a string: </dd></dl>
<dl class="section user"><dt></dt><dd><div class="fragment"><div class="line"><span class="keyword">using</span> <a class="code" href="classBloombergLP_1_1blpapi_1_1Event.html">BloombergLP::blpapi::Event</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="classBloombergLP_1_1blpapi_1_1Name.html">BloombergLP::blpapi::Name</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="group__blpapi__messageformatter.html#gabbfa826e411d2617e18e50d0eaf1aca3">BloombergLP::blpapi::test::MessageFormatter</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="classBloombergLP_1_1blpapi_1_1test_1_1MessageProperties.html">BloombergLP::blpapi::test::MessageProperties</a>;</div><div class="line"><span class="keyword">using</span> <a class="code" href="group__blpapi__testutil.html#ga85372be562fde52ca2d1da14b2b5b31c">BloombergLP::blpapi::test::TestUtil</a>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *schema = <span class="stringliteral">&quot;&lt;ServiceDefinition name=...&gt;...&lt;/ServiceDefinition&gt;&quot;</span>;</div><div class="line"></div><div class="line">std::istringstream stream(schema);</div><div class="line">Service service = TestUtil::deserializeService(stream);</div></div><!-- fragment --> </dd></dl>
<dl class="section user"><dt></dt><dd>We then create a subscription event </dd></dl>
<dl class="section user"><dt></dt><dd><div class="fragment"><div class="line">Event <span class="keyword">event</span> = TestUtil::createEvent(Event::EventType::SUBSCRIPTION_DATA);</div></div><!-- fragment --> </dd></dl>
<dl class="section user"><dt></dt><dd>We prepare the message properties: </dd></dl>
<dl class="section user"><dt></dt><dd><div class="fragment"><div class="line">MessageProperties properties;</div><div class="line">properties.setCorrelationId(correlationId);</div></div><!-- fragment --> </dd></dl>
<dl class="section user"><dt></dt><dd>Then, we obtain the definition for the message from the schema: </dd></dl>
<dl class="section user"><dt></dt><dd><div class="fragment"><div class="line"><span class="keyword">const</span> Name msgName(<span class="stringliteral">&quot;MarketDataEvents&quot;</span>);</div><div class="line"><span class="keyword">const</span> SchemaElementDefinition def = service.getEventDefinition(msgName);</div></div><!-- fragment --> </dd></dl>
<dl class="section user"><dt></dt><dd>Now we append a message and obtain a formatter: </dd></dl>
<dl class="section user"><dt></dt><dd><div class="fragment"><div class="line"><a class="code" href="group__blpapi__messageformatter.html#gabbfa826e411d2617e18e50d0eaf1aca3">MessageFormatter</a> fmt = TestUtil::appendMessage(event, def, properties);</div></div><!-- fragment --> </dd></dl>
<dl class="section user"><dt></dt><dd>The formatter can now be used to fill in the data we want to be using in the test. Note that service creation and the definitions for the ticks can be shared by all of the unit tests that need to create the same type of events. </dd></dl>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ga85372be562fde52ca2d1da14b2b5b31c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga85372be562fde52ca2d1da14b2b5b31c">&#9670;&nbsp;</a></span>TestUtil</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="classBloombergLP_1_1blpapi_1_1test_1_1TestUtil.html">test::TestUtil</a> <a class="el" href="group__blpapi__testutil.html#ga85372be562fde52ca2d1da14b2b5b31c">TestUtil</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.15 </li>
  </ul>
</div>
</body>
</html>
